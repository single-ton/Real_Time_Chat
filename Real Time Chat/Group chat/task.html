<h5 id="description">Description</h5>
<p>Currently, app users can only send messages to themselves. Let's improve the app by implementing the group chat. To add this function, use WebSocket with the <code class="language-java">STOMP</code> protocol. After a user sends a message, it should appear not only on the current user chat page, but also for all online users.</p>
<p>To test your program, open two or more private browser windows. Starting from this stage, tests will open three private browser windows.</p>
<h5 id="theory">Theory</h5>
<p>WebSocket is a bidirectional, persistent connection between a web browser and a server. Once a WebSocket connection is established, the connection stays open until the server or the client decides to close the connection. Cases of WebSockets: chat apps, multiplayer games, collaborative apps, social feeds, location apps, etc. Take a look video <a href="https://www.youtube.com/watch?v=i5OVcTdt_OU" rel="noopener noreferrer nofollow" target="_blank">What are WebSockets?</a> by Tech Primers that contains more details.</p>
<p>To start working with the WebSocket in Spring Boot, add the following dependency to the <code class="language-java">build.gradle</code> file:</p>
<pre><code class="language-java">dependencies {
   // ...
   implementation 'org.springframework.boot:spring-boot-starter-websocket'
   // ...
}</code></pre>
<p>To work with WebSocket, add these two imports before the closing tag <code class="language-java">&lt;/body&gt;</code> (if you already have JS import statements, place the following imports before them):do </p>
<pre><code class="language-java">// ...
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.0/sockjs.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"&gt;&lt;/script&gt;
// ...
&lt;/body&gt;</code></pre>
<p>You can refer to the following articles to get a better idea:</p>
<ul>
<li><a href="https://spring.io/guides/gs/messaging-stomp-websocket/" rel="noopener noreferrer nofollow" target="_blank">Using WebSocket to build an interactive web application</a> by Spring;</li>
<li><a href="https://o7planning.org/10719/create-a-simple-chat-application-with-spring-boot-and-websocket" rel="noopener noreferrer nofollow" target="_blank">Create a simple Chat application with Spring Boot and Websocket</a> by o7planning;</li>
<li><a href="https://www.section.io/engineering-education/getting-started-with-spring-websockets/" rel="noopener noreferrer nofollow" target="_blank">Getting Started with Spring WebSockets in Java</a> by John Amiscaray.</li>
</ul>
<p>Additional tutorials that can help you:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=-ao3pX-UhQc" rel="noopener noreferrer nofollow" target="_blank">Spring Boot WebSocket: Chat Example</a> on YouTube by Java master</li>
<li><a href="https://www.callicoder.com/spring-boot-websocket-chat-example/" rel="noopener noreferrer nofollow" target="_blank">Building a chat application with Spring Boot and WebSocket</a> by Callicoder</li>
<li><a href="https://www.pixeltrice.com/build-spring-boot-chat-application-from-scratch/" rel="noopener noreferrer nofollow" target="_blank">Build Spring Boot Chat Application from scratch</a> by PixelTrice</li>
</ul>
<h5 id="objectives">Objectives</h5>
<ul>
<li>First, add the WebSocket dependency to the <code class="language-java">build.gradle</code> file and the JS imports;</li>
<li>Implement WebSocket support on both sides. When a user opens the chat page, a WebSocket connection should be established between the browser and server (JS and Spring Boot). After a user inputs a message in the input field and presses the send button, the message should be sent via an opened WebSocket connection to the server. After the server receives the message, it should send this message to all subscribed users. When a user receives a message from the server, it should be processed and the message should appear in the message container.</li>
</ul>
<h5 id="examples">Examples</h5>
<p><strong>Example 1: </strong><em>after users A and B opened the chat page, and user A sent a message</em></p>
<p><em>User A:</em></p>
<p style="text-align: center;"><img alt="" height="579" name="image.png" src="https://ucarecdn.com/120ae4ee-5d9e-4425-a981-302b15304a34/" width="716"/></p>
<p><em>User B (same)</em>:</p>
<p style="text-align: center;"><img alt="" height="579" name="image.png" src="https://ucarecdn.com/120ae4ee-5d9e-4425-a981-302b15304a34/" width="716"/></p>
<p><strong>Example 2: </strong><em>after user B sent a message</em></p>
<p><em>User A:</em></p>
<p style="text-align: center;"><img alt="" height="579" name="image.png" src="https://ucarecdn.com/9dca460b-7143-47c1-a01e-1862e4e1a66f/" width="716"/></p>
<p><em>User B (same):</em></p>
<p style="text-align: center;"><img alt="" height="579" name="image.png" src="https://ucarecdn.com/9dca460b-7143-47c1-a01e-1862e4e1a66f/" width="716"/></p>